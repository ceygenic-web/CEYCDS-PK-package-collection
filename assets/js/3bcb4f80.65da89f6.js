"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[145],{2926:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"packages/composer-packages/CEYCDS-PK-COMPOSER-003-blog/index","title":"Blog Package (CEYCDS-PK-COMPOSER-003)","description":"A comprehensive Laravel package for managing blog posts, categories, tags, and authors","source":"@site/docs/packages/composer-packages/CEYCDS-PK-COMPOSER-003-blog/index.md","sourceDirName":"packages/composer-packages/CEYCDS-PK-COMPOSER-003-blog","slug":"/packages/composer-packages/CEYCDS-PK-COMPOSER-003-blog/","permalink":"/CEYCDS-PK-package-collection/docs/packages/composer-packages/CEYCDS-PK-COMPOSER-003-blog/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Blog Package (CEYCDS-PK-COMPOSER-003)","description":"A comprehensive Laravel package for managing blog posts, categories, tags, and authors"},"sidebar":"tutorialSidebar","previous":{"title":"CEYGENIC NPM Package Template","permalink":"/CEYCDS-PK-package-collection/docs/packages/npm-packages/CEYCDS-PK-000-NPMPackageTemplate"},"next":{"title":"Developer Guide","permalink":"/CEYCDS-PK-package-collection/docs/packages/composer-packages/CEYCDS-PK-COMPOSER-003-blog/developer-guide"}}');var a=i(4848),r=i(8453);const l={sidebar_position:1,title:"Blog Package (CEYCDS-PK-COMPOSER-003)",description:"A comprehensive Laravel package for managing blog posts, categories, tags, and authors"},t="Blog Package (ceygenic/blog-core)",d={},o=[{value:"Features",id:"features",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Installation &amp; Setup",id:"installation--setup",level:2},{value:"Step 1: Install the Package",id:"step-1-install-the-package",level:3},{value:"Step 2: Publish Configuration",id:"step-2-publish-configuration",level:3},{value:"Step 3: Configure Environment Variables",id:"step-3-configure-environment-variables",level:3},{value:"Step 4: Configure Database Connection",id:"step-4-configure-database-connection",level:3},{value:"Step 5: Run Database Migrations",id:"step-5-run-database-migrations",level:3},{value:"Step 6: Install Laravel Sanctum (For Admin API)",id:"step-6-install-laravel-sanctum-for-admin-api",level:3},{value:"Step 6.5: Create Cache Table (For Rate Limiting)",id:"step-65-create-cache-table-for-rate-limiting",level:3},{value:"Step 7: Install Required Dependencies",id:"step-7-install-required-dependencies",level:3},{value:"Step 8: Verify Installation",id:"step-8-verify-installation",level:3},{value:"Usage",id:"usage",level:2},{value:"Using the Facade",id:"using-the-facade",level:3},{value:"Using Dependency Injection",id:"using-dependency-injection",level:3},{value:"Using the Service Container",id:"using-the-service-container",level:3},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"Base URL",id:"base-url",level:3},{value:"Public Endpoints (No Authentication Required)",id:"public-endpoints-no-authentication-required",level:3},{value:"Posts",id:"posts",level:4},{value:"Categories",id:"categories",level:4},{value:"Tags",id:"tags",level:4},{value:"Authors",id:"authors",level:4},{value:"Admin Endpoints (Authentication Required)",id:"admin-endpoints-authentication-required",level:3},{value:"Posts CRUD",id:"posts-crud",level:4},{value:"Categories CRUD",id:"categories-crud",level:4},{value:"Media",id:"media",level:4},{value:"Example API Usage",id:"example-api-usage",level:2},{value:"Create a Post (Admin)",id:"create-a-post-admin",level:3},{value:"List Published Posts (Public)",id:"list-published-posts-public",level:3},{value:"Search Posts (Public)",id:"search-posts-public",level:3},{value:"Create a Category (Admin)",id:"create-a-category-admin",level:3},{value:"Get Authentication Token",id:"get-authentication-token",level:3},{value:"Storage Drivers",id:"storage-drivers",level:2},{value:"Database Driver (Default)",id:"database-driver-default",level:3},{value:"Sanity CMS Driver",id:"sanity-cms-driver",level:3},{value:"Artisan Commands",id:"artisan-commands",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Routes not found (404 errors)",id:"routes-not-found-404-errors",level:3},{value:"Authentication errors on admin endpoints",id:"authentication-errors-on-admin-endpoints",level:3},{value:"QueryBuilder errors",id:"querybuilder-errors",level:3},{value:"Migration errors",id:"migration-errors",level:3},{value:"Package not auto-discovered",id:"package-not-auto-discovered",level:3},{value:"Installation Checklist",id:"installation-checklist",level:2},{value:"Additional Documentation",id:"additional-documentation",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"blog-package-ceygenicblog-core",children:"Blog Package (ceygenic/blog-core)"})}),"\n",(0,a.jsx)(n.p,{children:"A comprehensive Laravel package for managing blog posts, categories, tags, and authors. This package provides a complete RESTful API with public and admin endpoints, supporting both database and Sanity CMS storage drivers."}),"\n",(0,a.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Complete RESTful API (JSON",":API"," compliant)"]}),"\n",(0,a.jsx)(n.li,{children:"Public and Admin endpoints"}),"\n",(0,a.jsx)(n.li,{children:"Support for multiple storage drivers (Database & Sanity CMS)"}),"\n",(0,a.jsx)(n.li,{children:"Advanced filtering, sorting, and pagination"}),"\n",(0,a.jsx)(n.li,{children:"Automatic reading time calculation"}),"\n",(0,a.jsx)(n.li,{children:"Slug generation for posts, categories, and tags"}),"\n",(0,a.jsx)(n.li,{children:"Post status management (draft, published, archived)"}),"\n",(0,a.jsx)(n.li,{children:"Post scheduling and archiving"}),"\n",(0,a.jsx)(n.li,{children:"Media upload support"}),"\n",(0,a.jsx)(n.li,{children:"Rate limiting"}),"\n",(0,a.jsx)(n.li,{children:"Laravel Sanctum authentication for admin endpoints"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"PHP"})," >= 8.2"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Laravel"})," >= 10.0 or >= 11.0"]}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Composer"})}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Database"})," (MySQL, PostgreSQL, SQLite, etc.)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Laravel Sanctum"})," (for admin API authentication)"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"installation--setup",children:"Installation & Setup"}),"\n",(0,a.jsx)(n.h3,{id:"step-1-install-the-package",children:"Step 1: Install the Package"}),"\n",(0,a.jsx)(n.p,{children:"Install the package via Composer:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"composer require ceygenic/blog-core\n"})}),"\n",(0,a.jsx)(n.h3,{id:"step-2-publish-configuration",children:"Step 2: Publish Configuration"}),"\n",(0,a.jsx)(n.p,{children:"Publish the configuration file:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"php artisan vendor:publish --tag=blog-config\n"})}),"\n",(0,a.jsxs)(n.p,{children:["This creates a ",(0,a.jsx)(n.code,{children:"config/blog.php"})," file in your Laravel application."]}),"\n",(0,a.jsx)(n.h3,{id:"step-3-configure-environment-variables",children:"Step 3: Configure Environment Variables"}),"\n",(0,a.jsxs)(n.p,{children:["Add the following to your ",(0,a.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-env",children:"# Blog Package Configuration\nBLOG_ENABLED=true\nBLOG_PREFIX=[Blog]\nBLOG_DRIVER=db\n\n# Reading Time Configuration\nBLOG_READING_TIME_WPM=200\n\n# Sanity CMS Configuration (Optional - only if using Sanity driver)\nSANITY_PROJECT_ID=your-project-id\nSANITY_DATASET=production\nSANITY_TOKEN=your-sanity-token\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Configuration Options:"})}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Variable"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Default"}),(0,a.jsx)(n.th,{children:"Required"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"BLOG_ENABLED"})}),(0,a.jsx)(n.td,{children:"Enable/disable the blog package"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"true"})}),(0,a.jsx)(n.td,{children:"No"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"BLOG_PREFIX"})}),(0,a.jsx)(n.td,{children:"Default prefix for blog-related content"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"[Blog]"})}),(0,a.jsx)(n.td,{children:"No"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"BLOG_DRIVER"})}),(0,a.jsxs)(n.td,{children:["Storage driver: ",(0,a.jsx)(n.code,{children:"db"})," (database) or ",(0,a.jsx)(n.code,{children:"sanity"})," (Sanity CMS)"]}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"db"})}),(0,a.jsx)(n.td,{children:"No"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"BLOG_READING_TIME_WPM"})}),(0,a.jsx)(n.td,{children:"Words per minute for reading time calculation"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"200"})}),(0,a.jsx)(n.td,{children:"No"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"SANITY_PROJECT_ID"})}),(0,a.jsx)(n.td,{children:"Sanity project ID (only if using Sanity driver)"}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"Yes (if using Sanity)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"SANITY_DATASET"})}),(0,a.jsx)(n.td,{children:"Sanity dataset name"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"production"})}),(0,a.jsx)(n.td,{children:"Yes (if using Sanity)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"SANITY_TOKEN"})}),(0,a.jsx)(n.td,{children:"Sanity API token"}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"Yes (if using Sanity)"})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"step-4-configure-database-connection",children:"Step 4: Configure Database Connection"}),"\n",(0,a.jsxs)(n.p,{children:["The package uses Laravel's default database connection. Ensure your ",(0,a.jsx)(n.code,{children:".env"})," file has the correct database configuration:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-env",children:"DB_CONNECTION=mysql\nDB_HOST=127.0.0.1\nDB_PORT=3306\nDB_DATABASE=your_database\nDB_USERNAME=your_username\nDB_PASSWORD=your_password\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Using a Different Database Connection:"})}),"\n",(0,a.jsxs)(n.p,{children:["If you want to store blog data in a separate database, you can configure a custom connection in ",(0,a.jsx)(n.code,{children:"config/database.php"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"'connections' => [\n    'blog' => [\n        'driver' => 'mysql',\n        'host' => env('BLOG_DB_HOST', '127.0.0.1'),\n        'port' => env('BLOG_DB_PORT', '3306'),\n        'database' => env('BLOG_DB_DATABASE', 'blog_db'),\n        'username' => env('BLOG_DB_USERNAME', 'root'),\n        'password' => env('BLOG_DB_PASSWORD', ''),\n        // ... other connection settings\n    ],\n],\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Then set the connection in your models or via config. See the ",(0,a.jsx)(n.a,{href:"./developer-guide",children:"Developer Guide"})," for details."]}),"\n",(0,a.jsx)(n.h3,{id:"step-5-run-database-migrations",children:"Step 5: Run Database Migrations"}),"\n",(0,a.jsx)(n.p,{children:"Run the migrations to create the required database tables:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"php artisan migrate\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Tables Created:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"categories"})," - Blog categories"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"tags"})," - Blog tags"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"posts"})," - Blog posts"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"post_tag"})," - Pivot table for post-tag relationships"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"author_profiles"})," - Author profile information"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"media"})," - Media library files"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Note:"})," If using the Sanity driver (",(0,a.jsx)(n.code,{children:"BLOG_DRIVER=sanity"}),"), you don't need to run migrations as data is stored in Sanity CMS."]}),"\n",(0,a.jsx)(n.h3,{id:"step-6-install-laravel-sanctum-for-admin-api",children:"Step 6: Install Laravel Sanctum (For Admin API)"}),"\n",(0,a.jsx)(n.p,{children:"The admin API endpoints require Laravel Sanctum authentication. If you haven't installed it:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'composer require laravel/sanctum\nphp artisan vendor:publish --provider="Laravel\\Sanctum\\SanctumServiceProvider"\nphp artisan migrate\n'})}),"\n",(0,a.jsx)(n.h3,{id:"step-65-create-cache-table-for-rate-limiting",children:"Step 6.5: Create Cache Table (For Rate Limiting)"}),"\n",(0,a.jsx)(n.p,{children:"The API routes use rate limiting which requires a cache table when using the database cache driver. Create it:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"php artisan cache:table\nphp artisan migrate\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Note:"})," If you're using ",(0,a.jsx)(n.code,{children:"CACHE_DRIVER=array"})," in your ",(0,a.jsx)(n.code,{children:".env"})," for development, you can skip this step. However, for production, it's recommended to use the database cache driver with the cache table."]}),"\n",(0,a.jsx)(n.h3,{id:"step-7-install-required-dependencies",children:"Step 7: Install Required Dependencies"}),"\n",(0,a.jsxs)(n.p,{children:["The package requires ",(0,a.jsx)(n.code,{children:"spatie/laravel-query-builder"})," for filtering and sorting. It should be installed automatically, but if not:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"composer require spatie/laravel-query-builder\n"})}),"\n",(0,a.jsx)(n.h3,{id:"step-8-verify-installation",children:"Step 8: Verify Installation"}),"\n",(0,a.jsx)(n.p,{children:"Check if routes are registered:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"php artisan route:list | grep blog\n"})}),"\n",(0,a.jsx)(n.p,{children:"Test a public endpoint:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8000/api/blog/posts\n"})}),"\n",(0,a.jsx)(n.p,{children:"You should receive a JSON response."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(n.h3,{id:"using-the-facade",children:"Using the Facade"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"use Ceygenic\\Blog\\Facades\\Blog;\n\n// Create a category\n$category = Blog::categories()->create([\n    'name' => 'Technology',\n    'slug' => 'technology',\n    'description' => 'Tech-related posts',\n]);\n\n// Create a post\n$post = Blog::posts()->create([\n    'title' => 'My First Blog Post',\n    'slug' => 'my-first-blog-post',\n    'content' => 'This is the content of my blog post...',\n    'excerpt' => 'A brief excerpt',\n    'category_id' => $category->id,\n    'status' => 'published',\n    'published_at' => now(),\n]);\n\n// Create tags\n$tag1 = Blog::tags()->create(['name' => 'Laravel', 'slug' => 'laravel']);\n$tag2 = Blog::tags()->create(['name' => 'PHP', 'slug' => 'php']);\n\n// Attach tags to post\n$post->tags()->attach([$tag1->id, $tag2->id]);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"using-dependency-injection",children:"Using Dependency Injection"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"use Ceygenic\\Blog\\Blog;\n\nclass YourController extends Controller\n{\n    public function __construct(\n        private Blog $blog\n    ) {}\n\n    public function index()\n    {\n        $posts = $this->blog->posts()->all();\n        return view('posts.index', compact('posts'));\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"using-the-service-container",children:"Using the Service Container"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$blog = app('blog');\n$posts = $blog->posts()->all();\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,a.jsx)(n.h3,{id:"base-url",children:"Base URL"}),"\n",(0,a.jsxs)(n.p,{children:["All API endpoints are prefixed with ",(0,a.jsx)(n.code,{children:"/api/blog"})]}),"\n",(0,a.jsx)(n.h3,{id:"public-endpoints-no-authentication-required",children:"Public Endpoints (No Authentication Required)"}),"\n",(0,a.jsxs)(n.p,{children:["Rate-limited to ",(0,a.jsx)(n.strong,{children:"120 requests per minute"}),"."]}),"\n",(0,a.jsx)(n.h4,{id:"posts",children:"Posts"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/posts"})," - List all posts (with pagination, filtering, sorting)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/posts/{slug}"})," - Get single post by slug"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/posts/search?q={query}"})," - Search posts"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"filter[title]"})," - Filter by title"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"filter[status]"})," - Filter by status (draft, published, archived)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"filter[category_id]"})," - Filter by category ID"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"sort"})," - Sort by field (e.g., ",(0,a.jsx)(n.code,{children:"-published_at"})," for descending)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"per_page"})," - Items per page (default: 15)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"page"})," - Page number"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Example:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"GET /api/blog/posts?filter[status]=published&sort=-published_at&per_page=10\n"})}),"\n",(0,a.jsx)(n.h4,{id:"categories",children:"Categories"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/categories"})," - List all categories"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/categories/{slug}/posts"})," - Get posts by category"]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"tags",children:"Tags"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/tags"})," - List all tags"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/tags/{slug}/posts"})," - Get posts by tag"]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"authors",children:"Authors"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/authors/{id}"})," - Get author with posts"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"admin-endpoints-authentication-required",children:"Admin Endpoints (Authentication Required)"}),"\n",(0,a.jsxs)(n.p,{children:["Rate-limited to ",(0,a.jsx)(n.strong,{children:"60 requests per minute"}),". Requires Sanctum authentication."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Include token in header:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"Authorization: Bearer {your-token}\n"})}),"\n",(0,a.jsx)(n.h4,{id:"posts-crud",children:"Posts CRUD"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts"})," - List all posts"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts"})," - Create post"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts/{id}"})," - Get post"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"PUT/PATCH"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts/{id}"})," - Update post"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"DELETE"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts/{id}"})," - Delete post"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Post Management Actions:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts/{id}/publish"})," - Publish a post"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts/{id}/unpublish"})," - Unpublish a post"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts/{id}/toggle-status"})," - Toggle post status"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts/{id}/schedule"})," - Schedule a post"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts/{id}/duplicate"})," - Duplicate a post"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts/{id}/archive"})," - Archive a post"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/posts/{id}/restore"})," - Restore an archived post"]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"categories-crud",children:"Categories CRUD"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/categories"})," - List all categories"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/categories"})," - Create category"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/categories/{id}"})," - Get category"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"PUT/PATCH"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/categories/{id}"})," - Update category"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"DELETE"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/categories/{id}"})," - Delete category"]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"media",children:"Media"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST"})," ",(0,a.jsx)(n.code,{children:"/api/blog/admin/media/upload"})," - Upload media file"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Request:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Content-Type: ",(0,a.jsx)(n.code,{children:"multipart/form-data"})]}),"\n",(0,a.jsxs)(n.li,{children:["Field: ",(0,a.jsx)(n.code,{children:"file"})," (image file, max 10MB)"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"example-api-usage",children:"Example API Usage"}),"\n",(0,a.jsx)(n.h3,{id:"create-a-post-admin",children:"Create a Post (Admin)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8000/api/blog/admin/posts \\\n  -H "Authorization: Bearer YOUR_TOKEN" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "title": "Getting Started with Laravel",\n    "slug": "getting-started-with-laravel",\n    "content": "Laravel is a powerful PHP framework...",\n    "excerpt": "Learn the basics of Laravel",\n    "category_id": 1,\n    "status": "published",\n    "published_at": "2024-01-01T00:00:00Z",\n    "tags": [1, 2]\n  }\'\n'})}),"\n",(0,a.jsx)(n.h3,{id:"list-published-posts-public",children:"List Published Posts (Public)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl "http://localhost:8000/api/blog/posts?filter[status]=published&sort=-published_at"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"search-posts-public",children:"Search Posts (Public)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl "http://localhost:8000/api/blog/posts/search?q=Laravel"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"create-a-category-admin",children:"Create a Category (Admin)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8000/api/blog/admin/categories \\\n  -H "Authorization: Bearer YOUR_TOKEN" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "name": "Technology",\n    "slug": "technology",\n    "description": "Tech-related posts"\n  }\'\n'})}),"\n",(0,a.jsx)(n.h3,{id:"get-authentication-token",children:"Get Authentication Token"}),"\n",(0,a.jsx)(n.p,{children:"Create a login endpoint in your application:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"// routes/api.php\nRoute::post('/login', function (Request $request) {\n    $request->validate([\n        'email' => 'required|email',\n        'password' => 'required',\n    ]);\n\n    if (!Auth::attempt($request->only('email', 'password'))) {\n        return response()->json(['message' => 'Invalid credentials'], 401);\n    }\n\n    $user = Auth::user();\n    $token = $user->createToken('blog-admin')->plainTextToken;\n\n    return response()->json([\n        'token' => $token,\n        'user' => $user,\n    ]);\n});\n"})}),"\n",(0,a.jsx)(n.p,{children:"Then login to get a token:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8000/api/login \\\n  -H "Content-Type: application/json" \\\n  -d \'{"email":"user@example.com","password":"password"}\'\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"storage-drivers",children:"Storage Drivers"}),"\n",(0,a.jsx)(n.p,{children:"The package supports two storage drivers:"}),"\n",(0,a.jsx)(n.h3,{id:"database-driver-default",children:"Database Driver (Default)"}),"\n",(0,a.jsx)(n.p,{children:"Uses Laravel Eloquent to store data in your database."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-env",children:"BLOG_DRIVER=db\n"})}),"\n",(0,a.jsx)(n.h3,{id:"sanity-cms-driver",children:"Sanity CMS Driver"}),"\n",(0,a.jsx)(n.p,{children:"Uses Sanity CMS as the backend."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-env",children:"BLOG_DRIVER=sanity\nSANITY_PROJECT_ID=your-project-id\nSANITY_DATASET=production\nSANITY_TOKEN=your-sanity-token\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Note:"})," When using the Sanity driver, you don't need to run migrations as data is stored in Sanity CMS."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"artisan-commands",children:"Artisan Commands"}),"\n",(0,a.jsx)(n.p,{children:"The package includes an Artisan command for verifying dual storage:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"php artisan blog:verify-dual-storage\n"})}),"\n",(0,a.jsx)(n.p,{children:"This command verifies that data is synchronized between database and Sanity (if both are configured)."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(n.h3,{id:"routes-not-found-404-errors",children:"Routes not found (404 errors)"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Clear route cache: ",(0,a.jsx)(n.code,{children:"php artisan route:clear"})]}),"\n",(0,a.jsxs)(n.li,{children:["Clear config cache: ",(0,a.jsx)(n.code,{children:"php artisan config:clear"})]}),"\n",(0,a.jsxs)(n.li,{children:["Verify package is discovered: ",(0,a.jsx)(n.code,{children:"php artisan package:discover"})]}),"\n",(0,a.jsxs)(n.li,{children:["Check routes: ",(0,a.jsx)(n.code,{children:"php artisan route:list | grep blog"})]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"authentication-errors-on-admin-endpoints",children:"Authentication errors on admin endpoints"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Ensure Sanctum is installed and configured"}),"\n",(0,a.jsxs)(n.li,{children:["Verify you're sending the token: ",(0,a.jsx)(n.code,{children:"Authorization: Bearer {token}"})]}),"\n",(0,a.jsx)(n.li,{children:"Check that the token is valid and not expired"}),"\n",(0,a.jsx)(n.li,{children:"Verify the user exists in your database"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"querybuilder-errors",children:"QueryBuilder errors"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"composer require spatie/laravel-query-builder\n"})}),"\n",(0,a.jsx)(n.h3,{id:"migration-errors",children:"Migration errors"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Check if tables already exist: ",(0,a.jsx)(n.code,{children:"php artisan migrate:status"})]}),"\n",(0,a.jsxs)(n.li,{children:["Ensure your database connection is configured correctly in ",(0,a.jsx)(n.code,{children:".env"})]}),"\n",(0,a.jsx)(n.li,{children:"Verify database credentials are correct"}),"\n",(0,a.jsxs)(n.li,{children:["Check if you need to use a different database connection (see ",(0,a.jsx)(n.a,{href:"#step-4-configure-database-connection",children:"Database Connection Configuration"}),")"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"package-not-auto-discovered",children:"Package not auto-discovered"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Run: ",(0,a.jsx)(n.code,{children:"php artisan package:discover"})]}),"\n",(0,a.jsxs)(n.li,{children:["Check ",(0,a.jsx)(n.code,{children:"composer.json"})," has the package in ",(0,a.jsx)(n.code,{children:"require"})," section"]}),"\n",(0,a.jsxs)(n.li,{children:["Run: ",(0,a.jsx)(n.code,{children:"composer dump-autoload"})]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"installation-checklist",children:"Installation Checklist"}),"\n",(0,a.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Package installed via Composer"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Configuration file published (",(0,a.jsx)(n.code,{children:"php artisan vendor:publish --tag=blog-config"}),")"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Environment variables added to ",(0,a.jsx)(n.code,{children:".env"})]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Database migrations run (",(0,a.jsx)(n.code,{children:"php artisan migrate"}),")"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Laravel Sanctum installed and configured (for admin API)"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,a.jsx)(n.code,{children:"spatie/laravel-query-builder"})," installed"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Routes verified (",(0,a.jsx)(n.code,{children:"php artisan route:list | grep blog"}),")"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Tested public endpoint (e.g., ",(0,a.jsx)(n.code,{children:"GET /api/blog/posts"}),")"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Created test user and token for admin API"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Tested admin endpoint with authentication"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"additional-documentation",children:"Additional Documentation"}),"\n",(0,a.jsx)(n.p,{children:"For more detailed information, see the following guides:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"./developer-guide",children:"Developer Guide"})})," - In-depth guide for installing, configuring, and extending the package"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"./v2-guide",children:"Version 2 Developer Guide"})})," - Architecture documentation for developers building Version 2"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var s=i(6540);const a={},r=s.createContext(a);function l(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);